{% extends 'base.html'%} {% block title %}{{ page_title }}{% endblock %} 
{% load static %} {% load price_filters %} {% block content %}
<link rel="stylesheet" href="{% static 'css/core/all_hostels.css' %}" />

<div class="hostels">
  <h1 class="page-title">
    <a href="/"><i class="bx bx-home-alt"></i></a>
    <i class="bx bx-chevron-right"></i>
    {{ page_title }}
  </h1>

  <div class="side-side">
    <div class="hostel-container">
      {% if hostels %}
      <div class="results-info">
        Showing {{ hostels.start_index }} - {{ hostels.end_index }} of {{ total_results }} hostels
      </div>

      <div class="hostel-cards">
        {% for hostel in hostels %}
        <a href="#" style="text-decoration: none; color: inherit">
          <div class="house-card">
            <div class="house-image-container">
              <img
                src="{{ hostel.images.first.image.url }}"
                alt="{{ hostel.name }}"
                class="house-image"
                loading="lazy"
              />
            </div>
            <div class="house-content">
              <div class="house-details">
                <p class="house-price">KSh {{ hostel.pricing|format_price }}</p>
                <h4 class="house-name">{{ hostel.name }}</h4>
                <p class="house-location">
                  <i class="bx bx-map"></i> {{ hostel.location }}
                </p>
                <p class="available-units">
                  {{ hostel.available_vacants }} units
                </p>
              </div>
              <div class="contact-icons">
                <a
                  href="tel:{{ hostel.phone }}"
                  class="phone-link"
                  onclick="event.stopPropagation();"
                >
                  <i class="bx bx-phone"></i>
                </a>
                <a
                  href="https://wa.me/{{ hostel.phone }}"
                  class="whatsapp-link"
                  target="_blank"
                  onclick="event.stopPropagation();"
                >
                  <i class="bx bxl-whatsapp"></i>
                </a>
              </div>
            </div>
          </div>
        </a>
        {% endfor %}
      </div>

      {% if hostels.has_other_pages %}
      <div class="pagination">
        {% if hostels.has_previous %}
        <a
          href="?{% if query %}q={{ query }}&{% endif %}{% if hostel_type %}type={{ hostel_type }}&{% endif %}page={{ hostels.previous_page_number }}"
        >
          <i class="bx bx-chevron-left"></i>
        </a>
        {% else %}
        <span class="disabled">
          <i class="bx bx-chevron-left"></i>
        </span>
        {% endif %} {% for page_num in hostels.paginator.page_range %} 
        {% if page_num == hostels.number %}
        <span class="current">{{ page_num }}</span>
        {% elif page_num > hostels.number|add:'-3' and page_num < hostels.number|add:'3' %}
        <a
          href="?{% if query %}q={{ query }}&{% endif %}{% if hostel_type %}type={{ hostel_type }}&{% endif %}page={{ page_num }}"
          >{{ page_num }}</a
        >
        {% elif page_num == 1 %}
        <a
          href="?{% if query %}q={{ query }}&{% endif %}{% if hostel_type %}type={{ hostel_type }}&{% endif %}page=1"
          >1</a
        >
        {% if hostels.number > 4 %}
        <span class="disabled">...</span>
        {% endif %} {% elif page_num == hostels.paginator.num_pages %} 
        {% if hostels.number < hostels.paginator.num_pages|add:'-3' %}
        <span class="disabled">...</span>
        {% endif %}
        <a
          href="?{% if query %}q={{ query }}&{% endif %}{% if hostel_type %}type={{ hostel_type }}&{% endif %}page={{ hostels.paginator.num_pages }}"
          >{{ hostels.paginator.num_pages }}</a
        >
        {% endif %} {% endfor %} {% if hostels.has_next %}
        <a
          href="?{% if query %}q={{ query }}&{% endif %}{% if hostel_type %}type={{ hostel_type }}&{% endif %}page={{ hostels.next_page_number }}"
        >
          <i class="bx bx-chevron-right"></i>
        </a>
        {% else %}
        <span class="disabled">
          <i class="bx bx-chevron-right"></i>
        </span>
        {% endif %}
      </div>
      {% endif %} {% else %}
      <div class="no-hostels"><p>No hostels found.</p></div>
      {% endif %}
    </div>
    <div class="how-it-works">
      <div class="container">
        <div class="header">
          <h1 class="main-title">How it works</h1>
          <p class="subtitle">
            Thousands of tenants and students are finding houses and hostels
            through
            <span class="brand">JoouStay</span>. Hereâ€™s how you can too:
          </p>
        </div>
        <div class="vertical-layout">
          <div class="vertical-step">
            <div class="vertical-icon-wrapper">
              <i class="bx bx-search vertical-icon"></i>
            </div>
            <div class="vertical-content">
              <div class="step-label">Step 1</div>
              <h3 class="step-title">SEARCH A HOUSE OR HOSTEL</h3>
            </div>
            <div class="vertical-connector"></div>
          </div>

          <div class="vertical-step">
            <div class="vertical-icon-wrapper">
              <i class="bx bx-list-check vertical-icon"></i>
            </div>
            <div class="vertical-content">
              <div class="step-label">Step 2</div>
              <h3 class="step-title">REVIEW SUGGESTED OPTIONS</h3>
            </div>
            <div class="vertical-connector"></div>
          </div>

          <div class="vertical-step">
            <div class="vertical-icon-wrapper">
              <i class="bx bxs-phone-call vertical-icon"></i>
            </div>
            <div class="vertical-content">
              <div class="step-label">Step 3</div>
              <h3 class="step-title">
                CLICK CONTACT LINKS (PHONE OR WHATSAPP)
              </h3>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
